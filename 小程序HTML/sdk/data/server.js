"use strict";var proxyServer,data,store=require("../store"),auth=require("../auth"),$=require("../jquery"),eventEmitter=require("../eventEmitter");function addCDN(e,r){function t(e){return e.pull}var o={},a=[];$.each(e,function(e,r){o[t(r)]=1}),$.each(r,function(e,r){o[t(r)]||a.push(e)}),a.sort(function(e,r){return e-r});for(var i=0,v=a.length;i<v;i++)e.push(r[a[i]])}function addServer(t,e){$.isArray(e)||(e=[e]);function o(e){return e.ip+e.port}var a={};$.each(t,function(e,r){a[o(r)]=1}),$.each(e,function(e,r){a[o(r)]||t.push(r)})}exports.init=function(){(data={roomServerList:[],chatServerList:[],liveServerList:[],masterProxyServerList:[],roomProxyServerList:[],chatProxyServerList:[],activeMasterServer:{},activeRoomServer:{},activeLiveServer:{}}).masterProxyServerList=store.get("partner.ms.proxy")},exports.getMasterProxyServerList=function(){return[]},exports.getRoomProxyServerList=function(){return[]},exports.setRoomProxyServerList=function(e){data.roomProxyServerList=e},exports.getChatProxyServerList=function(){return[]},exports.setChatProxyServerList=function(e){data.chatProxyServerList=e},exports.getRoomServerList=function(){return data.roomServerList},exports.addRoomServer=function(e){addServer(data.roomServerList,e)},exports.getChatServerList=function(){return data.chatServerList},exports.addChatServer=function(e){addServer(data.chatServerList,e)},exports.getLiveServerList=function(){return data.liveServerList},exports.addLiveServer=function(e){addCDN(data.liveServerList,e)},exports.getActiveMasterServer=function(){return data.activeMasterServer},exports.setActiveMasterServer=function(e){data.activeMasterServer=e},exports.getActiveRoomServer=function(){return data&&data.activeRoomServer},exports.setActiveRoomServer=function(e){data.activeRoomServer=e},exports.getActiveChatServer=function(){return data&&data.activeChatServer},exports.setActiveChatServer=function(e){data.activeChatServer=e};