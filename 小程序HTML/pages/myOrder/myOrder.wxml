<!--pages/myOrder/myOrder.wxml-->
<view class="myOrde flex_column">
  <view class="orderTab flex_dom flex_item_between" style="display: none">
    <view bindtap="choiceTab" data-idx="0" class="{{active==0?'active':''}}">全部</view>
    <view bindtap="choiceTab" data-idx="1" class="{{active==1?'active':''}}">待支付</view>
    <view bindtap="choiceTab" data-idx="2" class="{{active==2?'active':''}}">已完成</view>
    <view bindtap="choiceTab" data-idx="3" class="{{active==3?'active':''}}">待评价</view>
  </view>
  <view class="flex_1 relative">
    <swiper class="swiperCon" indicator-dots="{{false}}" autoplay="{{false}}" bindchange="swiperChange" current="{{active}}">
      <block wx:for="{{list}}" wx:key="item" wx:for-index="index">
        <swiper-item>
        <scroll-view scroll-y="{{true}}" class="flex_1 orderCtt" bindscrolltolower="bindscrolltolower">
          <view class="orderList">
            <view wx:for="{{list[active]}}" wx:key="item" class="orderItem">
              <view class="orderTop flex_dom" bindtap="goDetail" data-type="3">
                <image src="../../files/img_kecheng.png"></image>
                <view class="orderInfo flex_1">
                  <view class="orderName line2 font30 color-333">{{item.title}}</view>
                  <view class="orderPrice">
                    <view class="font36 redPrice">¥{{item.pay_price}}</view>
                    <view class="font24 color-999 grayPrice">¥{{item.price}}</view>
                  </view>
                </view>
                <view wx:if="{{item.status == 2}}" class="orderIcon1 font24 orderState">待支付</view>
                <view wx:if="{{item.status == 1||(item.status!=2&&item.status==3)}}" class="color-999 font24 orderState">已完成</view>
                <view wx:if="{{item.status == 3}}" class="color-999 font24 orderState">已取消</view>
              </view>
              <view class="orderBtm">
                <view class="flex_dom flex_item_mid">
                  <view class="flex_1 font24 color-333">合计金额</view>
                  <view class="font36 redPrice">¥{{item.pay_price}}</view>
                </view>
                <!-- 待支付 -->
                <!-- <view class="flex_dom flex_item_mid m-t-20" wx:if="{{item.status == 2}}">
                  <view class="font24 color-999 flex_1">10分钟以后自动取消订单</view>
                  <view>
                    <button class="defaultBtn" data-id="{{item.order_id}}" bindtap="cancelOrder" hover-class="defaultBtn-hover">取消订单</button>
                    <button class="blueBtn" hover-class="blueBtn-hover">立即支付</button>
                  </view>
                </view> -->
                <!-- 已完成 -->
                <view>
                  <view class="flex_dom flex_item_mid m-t-20" wx:if="{{item.actions.length}}">
                    <view class="font20 color-999 flex_1">
                      <view wx:if="{{item.status==2}}">10分钟以后自动取消订单</view>
                      <view wx:if="{{item.action=='detali'}}">拼团失败，自动退款</view>
                    </view>
                    <view>
                      <button 
                      wx:for="{{item.actions}}" 
                      wx:key="button" 
                      wx:for-item="button"
                      class="{{(button.action == 'pay'||button.action=='learn'||button.action=='grade')?'blueBtn':(button.action=='playback'?'otherBtn':'defaultBtn')}}" 
                      hover-class="{{(button.action == 'pay'||button.action=='learn'||button.action=='grade')?'blueBtn-hover':(button.action=='playback'?'otherBtn-hover':'defaultBtn-hover')}}">
                      {{button.text}}
                      </button>
                    </view>
                  </view>
                </view>
              </view>
            </view>
          </view>
          <view class='around-center p-v-20'>
                <text wx:if="{{pages[index].max_page_index != pages[index].page_index}}" class='color-be font30'>加载中。。。</text>          
                <view wx:else>
                  <text wx:if="{{list[index].length>0}}" class='color-be font30'>没有更多了</text>
                </view>
              </view>
        </scroll-view>
        </swiper-item>
      </block>
    </swiper>
  </view>
</view>
